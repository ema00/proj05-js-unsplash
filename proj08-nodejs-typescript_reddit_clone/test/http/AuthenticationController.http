// Tests for the Authentication Controller

### Authentication endpoints
@domain = http://localhost:3000/
@loginEndpoint = login/
@logoutEndpoint = logout/
@loginUrl = {{domain}}{{loginEndpoint}}
@logoutUrl = {{domain}}{{logoutEndpoint}}


### Request Token for an existing User, right password
### Return Status 200
# @name loginUser
@userName = "judas"
@userPassword = "j"
POST {{loginUrl}} HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "name": {{userName}},
    "password": {{userPassword}}
}


### Logout an existing User, right session
### Return Status 200 if user is logged in, 400 otherwise
@userId = {{loginUser.response.body.$.session.userId}}
@token = "{{loginUser.response.body.$.session.token}}"
POST {{logoutUrl}} HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "userId": {{userId}},
    "token": {{token}}
}


### Logout an existing User, wrong session
### Return Status 400
@falseToken = "anytoken"
POST {{logoutUrl}} HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "userId": {{userId}},
    "token": {{falseToken}}
}


### Request Token for a non-existent User
### Return Status 400
@userNameNonExistent = "juancho"
POST {{loginUrl}} HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "name": {{userNameNonExistent}},
    "password": {{userPassword}}
}


### Request Token for an existent User, but wrong password
### Return Status 400
@passwordWrong = "judasPass"
POST {{loginUrl}} HTTP/1.1
Content-Type: application/json
Accept: application/json

{
    "name": {{userName}},
    "password": {{passwordWrong}}
}

